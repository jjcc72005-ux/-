<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zidan Trace | ÙÙ† Ø§Ù„Ø±Ø³Ù… Ø§Ù„Ø°Ù‡Ø¨ÙŠ</title>
<style>
  body {
    margin: 0;
    font-family: "Cairo", sans-serif;
    background: radial-gradient(circle at center, #000 60%, #111 100%);
    color: #ffd700;
    overflow: hidden;
    user-select: none;
  }

  /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
  #splash {
    position: fixed;
    inset: 0;
    background: #000;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 9999;
    animation: fadeOut 1s ease 3s forwards;
  }
  @keyframes fadeOut { to { opacity: 0; visibility: hidden; } }

  #splash .pen {
    width: 100px;
    height: 100px;
    position: relative;
  }

  #splash .pen::before {
    content: "âœ’ï¸";
    font-size: 60px;
    position: absolute;
    left: 20px;
    animation: drawName 3s ease forwards;
  }

  @keyframes drawName {
    0% { opacity: 0; transform: translateX(-50px); }
    50% { opacity: 1; transform: translateX(0); }
    100% { transform: translateX(50px); }
  }

  #splash h1 {
    margin-top: 25px;
    font-size: 32px;
    background: linear-gradient(90deg, #ffd700, #ffcc33);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    letter-spacing: 3px;
  }

  /* Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ */
  video {
    width: 100vw;
    height: 100vh;
    object-fit: cover;
    position: fixed;
    top: 0;
    left: 0;
    z-index: -3;
  }

  /* Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
  #main {
    position: fixed;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    background: rgba(0,0,0,0.8);
    backdrop-filter: blur(10px);
    z-index: 5;
  }

  #startBtn {
    background: linear-gradient(45deg, #ffd700, #ffae00);
    color: #000;
    border: none;
    padding: 18px 50px;
    border-radius: 50px;
    font-size: 20px;
    cursor: pointer;
    box-shadow: 0 0 25px #ffd70080;
    transition: all 0.3s ease;
  }

  #startBtn:hover {
    transform: scale(1.1);
    box-shadow: 0 0 35px #ffd700aa;
  }

  /* Ø·Ø¨Ù‚Ø© Ø§Ù„ØµÙˆØ±Ø© */
  #overlay {
    position: fixed;
    inset: 0;
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 10;
  }

  #uploadedImg {
    position: absolute;
    max-width: 90%;
    max-height: 80%;
    border-radius: 15px;
    transition: all 0.3s ease;
    opacity: 0.8;
    filter: brightness(1.2) contrast(1.2);
    box-shadow: 0 0 40px #ffd70033;
  }

  #controls {
    position: fixed;
    bottom: 20px;
    width: 95%;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
    gap: 10px;
  }

  .btn {
    background: radial-gradient(circle at top, #ffd700, #b8860b);
    border: none;
    color: #000;
    font-weight: bold;
    padding: 10px 15px;
    border-radius: 50px;
    cursor: pointer;
    box-shadow: 0 0 15px #ffd70066;
    transition: all 0.3s;
  }

  .btn:hover {
    transform: scale(1.15);
  }

  input[type="file"] {
    display: none;
  }

  input[type="range"] {
    accent-color: #ffd700;
  }

  #focusBtn {
    position: fixed;
    top: 20px;
    right: 20px;
    background: #00000088;
    color: #ffd700;
    border: 1px solid #ffd70055;
    padding: 8px 15px;
    border-radius: 10px;
    cursor: pointer;
  }
</style>
</head>
<body>

<!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
<div id="splash">
  <div class="pen"></div>
  <h1>Zidan Trace</h1>
</div>

<!-- Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ -->
<video id="camera" autoplay playsinline></video>

<!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© -->
<div id="main">
  <button id="startBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ âœ¨</button>
</div>

<!-- Ø§Ù„Ø·Ø¨Ù‚Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
<div id="overlay">
  <img id="uploadedImg" src="" alt="">
  <div id="controls">
    <label class="btn">
      ğŸ“ ØµÙˆØ±Ø©<input type="file" id="fileInput" accept="image/*">
    </label>
    <button class="btn" id="flipBtn">ğŸ”„</button>
    <button class="btn" id="highBtn">â˜€ï¸ ÙˆØ¶ÙˆØ­ Ø¹Ø§Ù„ÙŠ</button>
    <button class="btn" id="lockBtn">ğŸ”’</button>
    <label>Ø´ÙØ§ÙÙŠØ©<input type="range" id="opacityRange" min="0.3" max="1" step="0.05" value="0.8"></label>
    <label>Ø­Ø¬Ù…<input type="range" id="sizeRange" min="0.5" max="2" step="0.1" value="1"></label>
  </div>
  <button id="focusBtn">ğŸ¯ ÙˆØ¶Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ²</button>
</div>

<script>
let camera = document.getElementById('camera');
let overlay = document.getElementById('overlay');
let startBtn = document.getElementById('startBtn');
let fileInput = document.getElementById('fileInput');
let uploadedImg = document.getElementById('uploadedImg');
let opacityRange = document.getElementById('opacityRange');
let sizeRange = document.getElementById('sizeRange');
let flipBtn = document.getElementById('flipBtn');
let lockBtn = document.getElementById('lockBtn');
let focusBtn = document.getElementById('focusBtn');
let highBtn = document.getElementById('highBtn');

let locked = false;
let focusMode = false;
let usingFrontCamera = false;

async function startCamera() {
  let constraints = { video: { facingMode: usingFrontCamera ? 'user' : 'environment' } };
  try {
    let stream = await navigator.mediaDevices.getUserMedia(constraints);
    camera.srcObject = stream;
  } catch (e) {
    alert("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§.");
    console.error(e);
  }
}

startBtn.onclick = () => {
  document.getElementById('main').style.display = 'none';
  overlay.style.display = 'flex';
  startCamera();
};

fileInput.onchange = e => {
  let file = e.target.files[0];
  if (file) {
    let reader = new FileReader();
    reader.onload = () => {
      uploadedImg.src = reader.result;
      uploadedImg.style.display = 'block';
    };
    reader.readAsDataURL(file);
  }
};

opacityRange.oninput = e => {
  uploadedImg.style.opacity = e.target.value;
};

sizeRange.oninput = e => {
  uploadedImg.style.transform = `scale(${e.target.value})`;
};

flipBtn.onclick = () => {
  usingFrontCamera = !usingFrontCamera;
  startCamera();
};

lockBtn.onclick = () => {
  locked = !locked;
  uploadedImg.style.pointerEvents = locked ? 'none' : 'auto';
  lockBtn.textContent = locked ? "âœ… Ù…Ù‚ÙÙˆÙ„Ø©" : "ğŸ”’";
};

focusBtn.onclick = () => {
  focusMode = !focusMode;
  document.getElementById('controls').style.display = focusMode ? 'none' : 'flex';
  focusBtn.textContent = focusMode ? "ğŸ‘ï¸ Ø®Ø±ÙˆØ¬ Ø§Ù„ØªØ±ÙƒÙŠØ²" : "ğŸ¯ ÙˆØ¶Ø¹ Ø§Ù„ØªØ±ÙƒÙŠØ²";
};

highBtn.onclick = () => {
  uploadedImg.style.filter = "brightness(1.5) contrast(1.5)";
  uploadedImg.style.opacity = 0.95;
  highBtn.textContent = "â˜€ï¸ ØªÙ… Ø§Ù„ØªÙˆØ¶ÙŠØ­";
};
</script>

</body>
</html>
